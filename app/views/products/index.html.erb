<h2> Product Index </h2>

<% @products.each do |product| %>
	<%= product.name %><br>
	<% if product.description.present? %>
		<div id="product-<%= product.id %>">
			<%= truncate(product.description) %><br>
		<div>
	<% end %>
	<button class="js-more" data-id="<%= product.id %>"> More Info </button><br><br>
<% end %>

<script type="text/javascript" charset="utf-8">
$(function () {
  $(".js-more").on('click', function() {
    var id = $(this).data("id");

    $.get("/products/" + id + "/description", function(data) {
      $("div#product-" + id).text(data);
		})
		$.get("/products/" + id + "/inventory", function(data) {
			let resp;
			data === true ? (resp = 'Available') : (resp = 'Sold Out')
      $("div#product-" + id).append('<br>', resp);
    })
  });
});
</script>
